# GitHub Actions Configuration

Этот проект использует GitHub Actions для автоматической сборки под разные платформы.

## Workflows

### 1. `build.yml` - Основная сборка
**Триггеры:**
- Push в ветки `main`, `master`
- Создание тегов `v*`
- Pull requests
- Ручной запуск

**Что делает:**
- Собирает бинарники для Linux, macOS, Windows
- Тестирует собранные бинарники
- Загружает артефакты
- Создает релизы при создании тегов

### 2. `test.yml` - Быстрые тесты
**Триггеры:**
- Push в любые ветки
- Pull requests

**Что делает:**
- Быстрая проверка кода
- go fmt, go vet
- Базовые тесты функциональности

## Как использовать

### Автоматическая сборка при разработке
Просто делайте push - GitHub Actions автоматически:
1. Соберет проект для всех платформ
2. Проверит качество кода
3. Запустит базовые тесты

### Создание релизов
1. Создайте тег:
   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```

2. GitHub Actions автоматически:
   - Соберет все платформы
   - Создаст релиз на GitHub
   - Прикрепит бинарники к релизу

### Ручной запуск
1. Идите в Actions → Cross-platform Build
2. Нажмите "Run workflow"
3. Выберите ветку и запустите

## Загрузка бинарников

### Из Artifacts (для разработки)
1. Идите в Actions → нужный run
2. Скачайте нужный артефакт
3. Распакуйте zip

### Из Releases (для пользователей)
1. Идите в Releases
2. Скачайте нужный бинарник напрямую

## Структура артефактов

```
speex-linux/         # Linux x64 binary
└── speex-linux

speex-macos/         # macOS binary (Universal)
└── speex-macos

speex-windows/       # Windows x64 binary
└── speex.exe
```

## Устранение проблем

### Сборка не запускается
- Проверьте, что `.github/workflows/` в корне репозитория
- Убедитесь, что файлы имеют правильный YAML синтаксис

### Ошибки сборки Windows
- SpeexDSP собирается автоматически
- Если ошибка - проверьте логи SpeexDSP compilation step

### Ошибки в релизах
- Убедитесь, что у вас есть права на создание релизов
- Проверьте, что тег создан правильно (`v*` формат)

## Кастомизация

### Добавление новых платформ
Отредактируйте `build.yml`:
```yaml
build-arm64:
  runs-on: ubuntu-latest
  steps:
    # ... добавьте новый job
```

### Изменение версии Go
```yaml
- name: Set up Go
  uses: actions/setup-go@v3
  with:
    go-version: 1.22  # Обновите версию
```

### Добавление тестов
Добавьте шаги в `test.yml`:
```yaml
- name: Run tests
  run: go test ./...
```
